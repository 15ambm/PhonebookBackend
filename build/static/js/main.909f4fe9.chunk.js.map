{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","App.js","index.js"],"names":["PersonForm","newName","newNumber","buttonHandler","nameHandler","numberHandler","value","onChange","type","onClick","Persons","persons","deleteHandler","map","person","key","id","name","number","Filter","filter","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","showAll","toggleShowAll","setFilter","notification","setNotification","useEffect","service","initialData","console","log","item","personsToShow","lowerCaseName","toLocaleLowerCase","lowerCaseFilter","includes","event","target","preventDefault","existingPerson","find","window","confirm","changedPerson","updatedPersons","p","setTimeout","concat","catch","err","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.909f4fe9.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({newName, newNumber, buttonHandler, nameHandler, numberHandler}) => {\r\n    return (\r\n        <form>\r\n            <div>\r\n                name: <input value={newName} onChange={nameHandler}/>\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={numberHandler}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\" onClick={buttonHandler}>add</button>\r\n            </div>\r\n        </form>\r\n        )\r\n}\r\n\r\nexport default PersonForm","import React from \"react\";\r\n\r\nconst Persons = ({persons, deleteHandler}) => {\r\n    return (\r\n        <div>\r\n            {persons.map(person => <li key={person.id}>\r\n                {person.name}\r\n                {\"  -   \"}\r\n                {person.number}\r\n                <button onClick={() => deleteHandler(person.id)}>Delete</button>\r\n                </li>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from \"react\";\r\n\r\nconst Filter = ({filter, onChange}) => {\r\n    return (\r\n        <div>\r\n        <input value={filter} onChange={onChange}></input>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = `http://localhost:3001/api/persons`\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteItem = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response)\r\n}\r\n\r\nexport default {getAll, create, deleteItem, update}","import React, { useState, useEffect } from 'react'\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport service from './services/persons'\n\nconst Notification = ({message}) => {\n  if(message === null) {\n    return null\n  }\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ showAll, toggleShowAll] = useState(true)\n  const [ filter, setFilter] = useState('')\n  const [ notification, setNotification] = useState(null)\n\n  useEffect(() => {\n    service\n      .getAll()\n      .then(initialData => {\n        console.log(initialData)\n        setPersons(initialData)\n        const ids = initialData.map(item => item.id)\n      })\n  }, [])\n\n\n  // KEY TAKEAWAY: Passing the event parameter to our handler\n  const handleNewNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n    if(event.target.value === '') {\n      toggleShowAll(true)\n    } else {\n      toggleShowAll(false)\n    }\n\n  }\n\n  // Don't forget to prevent default \n  const addNewPerson = (event) => {\n    event.preventDefault()\n    const existingPerson = persons.find(person => person.name === newName)\n\n    if(existingPerson) {\n      const result = window.confirm(`${newName} is already in the phonebook, would you like to replace the old number with a new one?`)\n      if(result) {\n        const id = existingPerson.id\n        const changedPerson = {...existingPerson, number: newNumber}\n        const updatedPersons = persons.map(p => p.id !== id ? p : changedPerson)\n\n        service\n          .update(id, changedPerson)\n          .then(response => {\n              setNotification(`The number of '${changedPerson.name}' has been changed`)\n              setPersons(updatedPersons)\n              setNewName('')\n              setNewNumber('')\n              setTimeout(() => {\n                  setNotification(null)\n              }, 5000)\n          })\n      }\n    } else {\n      const tempNewName = {\n        name: newName,  \n        number: newNumber,\n        // id: rollingID\n      }\n      service\n        .create(tempNewName)\n        .then(response => {\n          console.log(response)\n          setNotification(`'${newName}' has been added to the Phonebook`)\n          setPersons(persons.concat(response))\n          setNewName('')\n          setNewNumber('')\n          // setRollingID(rollingID + 1)\n          setTimeout(() => {\n            setNotification(null)\n          }, 5000)\n        }).catch(err => {})\n    }\n  }\n\n  const deletePersonHandler = (id) => {\n    const person = persons.find(p => p.id === id)\n    const result = window.confirm(`Are you sure you would like to delete ${person.name}`)\n    if(result) {\n      service\n      .deleteItem(id)\n      .then(response => {\n        setPersons(persons.filter(p => p.id !== id))\n        setNotification(`'${person.name}' has been deleted from the Phonebook`)\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setNotification(`'${person.name}' has been deleted from the Phonebook`)\n        setPersons(persons.filter(p => p.id !== person.id))\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000)\n        console.log(\"the person has been removed from the server already\")\n      })\n    }\n\n  }\n\n  const personsToShow = showAll ? persons : persons.filter(persons => {\n    let lowerCaseName = persons.name.toLocaleLowerCase()\n    let lowerCaseFilter = filter.toLocaleLowerCase()\n    return lowerCaseName.includes(lowerCaseFilter)\n  })\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification}/>\n      <Filter filter={filter} onChange={handleFilterChange} />\n      <h3>Add New Number</h3>\n        <PersonForm \n          newName={newName} \n          nameHandler={handleNewNameChange}\n          newNumber={newNumber} \n          numberHandler={handleNewNumberChange}\n          buttonHandler={addNewPerson}\n          />\n      <h3>Numbers</h3>\n        <Persons persons={personsToShow} deleteHandler={deletePersonHandler}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}